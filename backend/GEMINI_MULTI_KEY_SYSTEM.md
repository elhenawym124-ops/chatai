# ๐ ูุธุงู ููุงุชูุญ Gemini ุงููุชุนุฏุฏุฉ - ุงูุชูุซูู ุงูุดุงูู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุธุงู ุฌุฏูุฏ ููุชุทูุฑ ูุฅุฏุงุฑุฉ ููุงุชูุญ Gemini API ูุฏุนู:
- **ููุชุงุญ ูุงุญุฏ ูุฌููุน ุงูููุงุฐุฌ**: ุจุฏูุงู ูู ููุชุงุญ ูููุตู ููู ูููุฐุฌ
- **ุชุชุจุน ูููุตู ููุญุตุต**: ูู ูููุฐุฌ ูู ุญุตุฉ ูููุตูุฉ ููุฑุงูุจุฉ ูุณุชููุฉ
- **ุชุจุฏูู ุฐูู**: ุฃููุงู ุจูู ุงูููุงุฐุฌ ูู ููุณ ุงูููุชุงุญุ ุซู ุจูู ุงูููุงุชูุญ ุงููุฎุชููุฉ
- **ูุฑุงูุจุฉ ูู ุงูููุช ุงููุนูู**: ุนุฑุถ ุดุงูู ูุญุงูุฉ ุฌููุน ุงูููุงุชูุญ ูุงูููุงุฐุฌ

## ๐๏ธ ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฌุฏูู `gemini_keys` (ูุญุฏุซ)
```sql
- id: ูุนุฑู ุงูููุชุงุญ
- name: ุงุณู ุงูููุชุงุญ
- apiKey: ููุชุงุญ API (ูุฑูุฏ)
- model: ุงููููุฐุฌ ุงูุงูุชุฑุงุถู (ููุชูุงูู ูุน ุงููุธุงู ุงููุฏูู)
- isActive: ูู ุงูููุชุงุญ ูุดุท
- priority: ุฃููููุฉ ุงูููุชุงุญ (1 = ุงูุฃุนูู)
- description: ูุตู ุงูููุชุงุญ
- usage: ุจูุงูุงุช ุงูุงุณุชุฎุฏุงู (ููุชูุงูู ูุน ุงููุธุงู ุงููุฏูู)
- createdAt, updatedAt: ุชูุงุฑูุฎ ุงูุฅูุดุงุก ูุงูุชุญุฏูุซ
```

### ุฌุฏูู `gemini_key_models` (ุฌุฏูุฏ)
```sql
- id: ูุนุฑู ุงููููุฐุฌ
- keyId: ูุนุฑู ุงูููุชุงุญ ุงููุฑุชุจุท
- model: ุงุณู ุงููููุฐุฌ
- usage: ุจูุงูุงุช ุงูุงุณุชุฎุฏุงู (JSON)
- isEnabled: ูู ุงููููุฐุฌ ููุนู
- priority: ุฃููููุฉ ุงููููุฐุฌ (1 = ุงูุฃุนูู)
- lastUsed: ุขุฎุฑ ุงุณุชุฎุฏุงู
- createdAt, updatedAt: ุชูุงุฑูุฎ ุงูุฅูุดุงุก ูุงูุชุญุฏูุซ
```

## ๐ฏ ุงูููุงุฐุฌ ุงููุฏุนููุฉ ูุฃููููุงุชูุง

| ุงูุฃููููุฉ | ุงููููุฐุฌ | ุงูุญุตุฉ ุงูุงูุชุฑุงุถูุฉ | ุงููุตู |
|---------|---------|-----------------|-------|
| 1 | gemini-2.5-flash | 1,000,000 | ุงูุฃุญุฏุซ ูุงูุฃูุถู - ูุณุชูุฑ |
| 2 | gemini-2.5-pro | 500,000 | ุงูุฃููู ููููุงู ุงููุนูุฏุฉ - ูุณุชูุฑ |
| 3 | gemini-2.0-flash | 750,000 | ุณุฑูุน ููุณุชูุฑ |
| 4 | gemini-2.0-flash-exp | 1,000 | ุชุฌุฑูุจู - ุงุญุชูุงุทู |
| 5 | gemini-1.5-flash | 1,500 | ููููู ููู ูุนูู |
| 6 | gemini-1.5-pro | 50 | ููููู ููู ููู |

## ๐ ููุทู ุงูุชุจุฏูู ุงูุฐูู

### ุงููุฑุญูุฉ ุงูุฃููู: ุงูุชุจุฏูู ุจูู ุงูููุงุฐุฌ ูู ููุณ ุงูููุชุงุญ
1. ุงูุจุญุซ ุนู ุงูููุชุงุญ ุงููุดุท ุงูุญุงูู
2. ูุญุต ุฌููุน ุงูููุงุฐุฌ ุงููุชุงุญุฉ ูู ูุฐุง ุงูููุชุงุญ
3. ุงุฎุชูุงุฑ ุฃูู ูููุฐุฌ ูุชุงุญ ุญุณุจ ุงูุฃููููุฉ
4. ุงุฎุชุจุงุฑ ุตุญุฉ ุงููููุฐุฌ ูุจู ุงูุงุณุชุฎุฏุงู

### ุงููุฑุญูุฉ ุงูุซุงููุฉ: ุงูุชุจุฏูู ุจูู ุงูููุงุชูุญ ุงููุฎุชููุฉ
1. ุงูุจุญุซ ูู ุฌููุน ุงูููุงุชูุญ ูุฑุชุจุฉ ุญุณุจ ุงูุฃููููุฉ
2. ููู ููุชุงุญุ ุงูุจุญุซ ุนู ุฃูุถู ูููุฐุฌ ูุชุงุญ
3. ุชูุนูู ุงูููุชุงุญ ุงูุฌุฏูุฏ
4. ุฅุฑุฌุงุน ุชูุงุตูู ุงูุชุจุฏูู

## ๐๏ธ ุงูุฏูุงู ุงูุฑุฆูุณูุฉ

### `getActiveGeminiKey()`
- **ุงููุธููุฉ**: ุงูุญุตูู ุนูู ููุชุงุญ ูุดุท ูุน ุฃูุถู ูููุฐุฌ ูุชุงุญ
- **ุงูุฅุฑุฌุงุน**: `{ apiKey, model, keyId, modelId }`

### `findNextAvailableModel()`
- **ุงููุธููุฉ**: ุงูุจุญุซ ุนู ูููุฐุฌ ุงุญุชูุงุทู ูุชุงุญ
- **ุงูุฅุฑุฌุงุน**: `{ apiKey, model, keyId, keyName, switchType }`

### `updateModelUsage(modelId)`
- **ุงููุธููุฉ**: ุชุญุฏูุซ ุนุฏุงุฏ ุงูุงุณุชุฎุฏุงู ููููุฐุฌ ูุนูู
- **ุงููุนุงููุงุช**: `modelId` - ูุนุฑู ุงููููุฐุฌ

### `testModelHealth(apiKey, model)`
- **ุงููุธููุฉ**: ุงุฎุชุจุงุฑ ุตุญุฉ ูููุฐุฌ ูุนูู
- **ุงูุฅุฑุฌุงุน**: `boolean`

## ๐ API Endpoints ุงูุฌุฏูุฏุฉ

### GET `/api/v1/ai/gemini-keys`
ุนุฑุถ ุฌููุน ุงูููุงุชูุญ ูุน ุงูููุงุฐุฌ ูุงูุญุตุต:
```json
{
  "success": true,
  "data": [
    {
      "id": "key-id",
      "name": "ุงุณู ุงูููุชุงุญ",
      "apiKey": "AIzaSy...kefU",
      "isActive": true,
      "priority": 1,
      "models": [
        {
          "model": "gemini-2.5-flash",
          "usage": { "used": 0, "limit": 1000000 },
          "isEnabled": true,
          "priority": 1
        }
      ],
      "totalModels": 6,
      "availableModels": 6
    }
  ],
  "summary": {
    "totalKeys": 1,
    "activeKeys": 1,
    "totalModels": 6,
    "availableModels": 6
  }
}
```

### POST `/api/v1/ai/gemini-keys`
ุฅุถุงูุฉ ููุชุงุญ ุฌุฏูุฏ (ููุดุฆ ุฌููุน ุงูููุงุฐุฌ ุชููุงุฆูุงู):
```json
{
  "name": "ุงุณู ุงูููุชุงุญ",
  "apiKey": "AIzaSy...",
  "description": "ูุตู ุงุฎุชูุงุฑู"
}
```

## ๐งช ุงูุงุฎุชุจุงุฑุงุช

### ุงุฎุชุจุงุฑ ุงููุธุงู ุงูุฃุณุงุณู
```bash
node test-simple.js
```

### ุงุฎุชุจุงุฑ API
```bash
node test-api.js
```

### ุงุฎุชุจุงุฑ ุงูุชุจุฏูู
```bash
node test-new-system.js
```

## ๐ ุงููุฒุงูุง ุงูุฌุฏูุฏุฉ

### 1. **ููุงุกุฉ ุฃุนูู**
- ููุชุงุญ ูุงุญุฏ ูุฏุนู ุฌููุน ุงูููุงุฐุฌ
- ุชูููู ุนุฏุฏ ุงูููุงุชูุญ ุงููุทููุจุฉ
- ุงุณุชุบูุงู ุฃูุซู ููุญุตุต

### 2. **ูุฑููุฉ ุฃูุจุฑ**
- ุชุจุฏูู ุฐูู ุจูู ุงูููุงุฐุฌ
- ุฃููููุฉ ูุงุจูุฉ ููุชุฎุตูุต
- ูุฑุงูุจุฉ ููุตูุฉ ููู ูููุฐุฌ

### 3. **ุงุณุชูุฑุงุฑ ูุญุณู**
- ุงุฎุชุจุงุฑ ุตุญุฉ ุงูููุงุฐุฌ ูุจู ุงูุงุณุชุฎุฏุงู
- ุชุจุฏูู ุชููุงุฆู ุนูุฏ ุงูุฃุฎุทุงุก
- ุชุชุจุน ุฏููู ููุงุณุชุฎุฏุงู

### 4. **ุณูููุฉ ุงูุฅุฏุงุฑุฉ**
- ูุงุฌูุฉ ููุญุฏุฉ ูุฅุฏุงุฑุฉ ุงูููุงุชูุญ
- ุนุฑุถ ุดุงูู ููุญุงูุฉ
- ุฅุถุงูุฉ ูุจุณุทุฉ ููููุงุชูุญ ุงูุฌุฏูุฏุฉ

## ๐ง ุงูุชูููู ูุงูุตูุงูุฉ

### ุฅุถุงูุฉ ููุชุงุญ ุฌุฏูุฏ
1. ุงุณุชุฎุฏู API endpoint ุฃู ูุงุฌูุฉ ุงูุฅุฏุงุฑุฉ
2. ุณูุชู ุฅูุดุงุก ุฌููุน ุงูููุงุฐุฌ ุชููุงุฆูุงู
3. ุณูุชู ุชุนููู ุงูุฃููููุฉ ุชููุงุฆูุงู

### ูุฑุงูุจุฉ ุงูุฃุฏุงุก
- ูุญุต `/api/v1/ai/gemini-keys` ููุญุงูุฉ ุงูุนุงูุฉ
- ูุฑุงูุจุฉ logs ููุชุจุฏูู ุงูุชููุงุฆู
- ุชุชุจุน ุงุณุชุฎุฏุงู ูู ูููุฐุฌ

### ุงุณุชูุดุงู ุงูุฃุฎุทุงุก
- ูุญุต logs ููุฃุฎุทุงุก
- ุงุฎุชุจุงุฑ ุตุญุฉ ุงูููุงุชูุญ
- ุงูุชุฃูุฏ ูู ุตุญุฉ ุงูุญุตุต

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. **ูุฑุงูุจุฉ ุงูุฃุฏุงุก**: ุชุชุจุน ุฃุฏุงุก ุงููุธุงู ุงูุฌุฏูุฏ
2. **ุชุญุณูู ุงูุฎูุงุฑุฒููุงุช**: ุชุทููุฑ ููุทู ุงูุชุจุฏูู
3. **ุฅุถุงูุฉ ููุฒุงุช**: ูุซู ุฅุนุงุฏุฉ ุชุนููู ุงูุญุตุต ุงูุชููุงุฆูุฉ
4. **ุชุญุณูู ุงููุงุฌูุฉ**: ุชุทููุฑ ููุญุฉ ุชุญูู ูุชูุฏูุฉ

---

**ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ**: ูุฑูู ุงูุชุทููุฑ  
**ุงูุชุงุฑูุฎ**: 2025-01-28  
**ุงูุฅุตุฏุงุฑ**: 2.0.0
