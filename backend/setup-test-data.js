/**
 * Ø¥Ø¹Ø¯Ø§Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù„Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø¸Ø§Ù… Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ù…Ø³ØªÙ…Ø±
 */

const { PrismaClient } = require('@prisma/client');

async function setupTestData() {
  const prisma = new PrismaClient();

  try {
    console.log('ğŸ”§ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©...');

    // Ø¥Ù†Ø´Ø§Ø¡ Ø´Ø±ÙƒØ© ØªØ¬Ø±ÙŠØ¨ÙŠØ©
    const testCompany = await prisma.company.upsert({
      where: { id: 'test_company_123' },
      update: {},
      create: {
        id: 'test_company_123',
        name: 'Ø´Ø±ÙƒØ© Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ù…Ø³ØªÙ…Ø±',
        email: 'test@learning.com',
        phone: '01234567890',
        plan: 'BASIC',
        isActive: true
      }
    });

    console.log('âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø´Ø±ÙƒØ© Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©:', testCompany.name);

    // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø³ØªØ®Ø¯Ù… ØªØ¬Ø±ÙŠØ¨ÙŠ
    const testUser = await prisma.user.upsert({
      where: { email: 'test@learning.com' },
      update: {},
      create: {
        email: 'test@learning.com',
        password: 'hashed_password',
        firstName: 'Ù…Ø³ØªØ®Ø¯Ù…',
        lastName: 'ØªØ¬Ø±ÙŠØ¨ÙŠ',
        role: 'AGENT',
        companyId: testCompany.id,
        isActive: true,
        isEmailVerified: true
      }
    });

    console.log('âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ:', testUser.firstName, testUser.lastName);

    // Ø¥Ù†Ø´Ø§Ø¡ Ø¹Ù…ÙŠÙ„ ØªØ¬Ø±ÙŠØ¨ÙŠ
    const testCustomer = await prisma.customer.upsert({
      where: { id: 'customer_123' },
      update: {},
      create: {
        id: 'customer_123',
        firstName: 'Ø¹Ù…ÙŠÙ„',
        lastName: 'ØªØ¬Ø±ÙŠØ¨ÙŠ',
        phone: '01111111111',
        email: 'customer@test.com',
        companyId: testCompany.id
      }
    });

    console.log('âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ:', testCustomer.name);

    // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø­Ø§Ø¯Ø«Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ©
    const testConversation = await prisma.conversation.upsert({
      where: { id: 'conv_123' },
      update: {},
      create: {
        id: 'conv_123',
        customerId: testCustomer.id,
        companyId: testCompany.id,
        status: 'ACTIVE',
        channel: 'FACEBOOK'
      }
    });

    console.log('âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©');

    console.log('\nğŸ‰ ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­!');
    console.log('ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¢Ù† ØªØ´ØºÙŠÙ„ Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø§Ù„ØªØ¹Ù„Ù… Ø§Ù„Ù…Ø³ØªÙ…Ø±.');

  } catch (error) {
    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©:', error);
  } finally {
    await prisma.$disconnect();
  }
}

// ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯
if (require.main === module) {
  setupTestData().catch(console.error);
}

module.exports = setupTestData;
