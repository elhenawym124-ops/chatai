# ๐ ูุธุงู ุงูููุงุชูุฑ ูุงูุงุดุชุฑุงูุงุช - ุฏููู ุดุงูู

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุธุงู ุดุงูู ูุฅุฏุงุฑุฉ ุงูููุงุชูุฑ ูุงูุงุดุชุฑุงูุงุช ููุดุฑูุงุช ูุน ูุงุฌูุงุช ุฅุฏุงุฑูุฉ ูุชูุฏูุฉ ููุธุงู ุฅุดุนุงุฑุงุช ุชููุงุฆูุฉ.

## ๐๏ธ ุงูุจููุฉ ุงูุชูููุฉ

### ๐๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช (Prisma Schema)

#### ุฌุฏูู ุงูุงุดุชุฑุงูุงุช (Subscription)
```prisma
model Subscription {
  id              String   @id @default(cuid())
  companyId       String
  planType        String   // BASIC, PRO, ENTERPRISE
  status          String   // ACTIVE, TRIAL, INACTIVE, CANCELLED, EXPIRED, SUSPENDED
  startDate       DateTime
  endDate         DateTime?
  nextBillingDate DateTime?
  trialEndDate    DateTime?
  billingCycle    String   // monthly, yearly
  price           Float
  currency        String   @default("EGP")
  autoRenew       Boolean  @default(true)
  cancelledAt     DateTime?
  cancelReason    String?
  metadata        Json?
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  
  // Relations
  company         Company  @relation(fields: [companyId], references: [id])
  invoices        Invoice[]
  payments        Payment[]
}
```

#### ุฌุฏูู ุงูููุงุชูุฑ (Invoice)
```prisma
model Invoice {
  id              String   @id @default(cuid())
  invoiceNumber   String   @unique
  companyId       String
  subscriptionId  String?
  type            String   // SUBSCRIPTION, ONE_TIME, UPGRADE, DOWNGRADE, REFUND
  status          String   // DRAFT, SENT, PAID, OVERDUE, CANCELLED, REFUNDED
  issueDate       DateTime @default(now())
  dueDate         DateTime
  paidDate        DateTime?
  subtotal        Float
  taxAmount       Float    @default(0)
  discountAmount  Float    @default(0)
  totalAmount     Float
  currency        String   @default("EGP")
  paymentTerms    String?
  notes           String?
  metadata        Json?
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  
  // Relations
  company         Company      @relation(fields: [companyId], references: [id])
  subscription    Subscription? @relation(fields: [subscriptionId], references: [id])
  items           InvoiceItem[]
  payments        Payment[]
}
```

#### ุฌุฏูู ุนูุงุตุฑ ุงููุงุชูุฑุฉ (InvoiceItem)
```prisma
model InvoiceItem {
  id          String  @id @default(cuid())
  invoiceId   String
  description String
  quantity    Float   @default(1)
  unitPrice   Float
  totalPrice  Float
  metadata    Json?
  createdAt   DateTime @default(now())
  
  // Relations
  invoice     Invoice @relation(fields: [invoiceId], references: [id], onDelete: Cascade)
}
```

#### ุฌุฏูู ุงููุฏููุนุงุช (Payment)
```prisma
model Payment {
  id              String   @id @default(cuid())
  paymentNumber   String   @unique
  companyId       String
  invoiceId       String?
  subscriptionId  String?
  amount          Float
  currency        String   @default("EGP")
  status          String   // PENDING, COMPLETED, FAILED, CANCELLED, REFUNDED
  method          String   // CREDIT_CARD, DEBIT_CARD, BANK_TRANSFER, PAYPAL, STRIPE, CASH, CHECK
  gateway         String?
  transactionId   String?
  failureReason   String?
  paidAt          DateTime?
  metadata        Json?
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  
  // Relations
  company         Company       @relation(fields: [companyId], references: [id])
  invoice         Invoice?      @relation(fields: [invoiceId], references: [id])
  subscription    Subscription? @relation(fields: [subscriptionId], references: [id])
}
```

## ๐ง APIs ุงูุฎูููุฉ

### ๐ APIs ุงูุงุดุชุฑุงูุงุช
- `GET /api/v1/admin/subscriptions` - ุฌูุจ ุฌููุน ุงูุงุดุชุฑุงูุงุช ูุน ููุชุฑุฉ ูุจุญุซ
- `POST /api/v1/admin/subscriptions` - ุฅูุดุงุก ุงุดุชุฑุงู ุฌุฏูุฏ
- `PUT /api/v1/admin/subscriptions/:id` - ุชุญุฏูุซ ุงุดุชุฑุงู
- `POST /api/v1/admin/subscriptions/:id/cancel` - ุฅูุบุงุก ุงุดุชุฑุงู
- `POST /api/v1/admin/subscriptions/:id/renew` - ุชุฌุฏูุฏ ุงุดุชุฑุงู

### ๐ APIs ุงูููุงุชูุฑ
- `GET /api/v1/admin/invoices` - ุฌูุจ ุฌููุน ุงูููุงุชูุฑ ูุน ููุชุฑุฉ ูุจุญุซ
- `POST /api/v1/admin/invoices` - ุฅูุดุงุก ูุงุชูุฑุฉ ุฌุฏูุฏุฉ
- `PUT /api/v1/admin/invoices/:id/status` - ุชุญุฏูุซ ุญุงูุฉ ุงููุงุชูุฑุฉ
- `POST /api/v1/admin/invoices/:id/send` - ุฅุฑุณุงู ูุงุชูุฑุฉ
- `GET /api/v1/admin/invoices/stats/overview` - ุฅุญุตุงุฆูุงุช ุงูููุงุชูุฑ

### ๐ฐ APIs ุงููุฏููุนุงุช
- `GET /api/v1/admin/payments` - ุฌูุจ ุฌููุน ุงููุฏููุนุงุช ูุน ููุชุฑุฉ ูุจุญุซ
- `POST /api/v1/admin/payments` - ุชุณุฌูู ูุฏููุนุฉ ุฌุฏูุฏุฉ
- `PUT /api/v1/admin/payments/:id/status` - ุชุญุฏูุซ ุญุงูุฉ ุงููุฏููุนุฉ

### ๐ ูุนุงููุงุช ุงูููุชุฑุฉ ูุงูุจุญุซ
ุฌููุน APIs ุชุฏุนู:
- `page` - ุฑูู ุงูุตูุญุฉ
- `limit` - ุนุฏุฏ ุงูุนูุงุตุฑ ูู ุงูุตูุญุฉ
- `search` - ุงูุจุญุซ ูู ุงููุตูุต
- `status` - ููุชุฑุฉ ุจุงูุญุงูุฉ
- `dateFrom` / `dateTo` - ููุชุฑุฉ ุจุงูุชุงุฑูุฎ
- `sortBy` / `sortOrder` - ุชุฑุชูุจ ุงููุชุงุฆุฌ

## ๐จ ูุงุฌูุงุช ุงููุณุชุฎุฏู

### ๐ ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุงุดุชุฑุงูุงุช (`/super-admin/subscriptions`)
**ุงูููุฒุงุช:**
- ุนุฑุถ ุฌููุน ุงูุงุดุชุฑุงูุงุช ูู ุฌุฏูู ุชูุงุนูู
- ุจุทุงูุงุช ุฅุญุตุงุฆูุงุช (ุฅุฌูุงููุ ูุดุทุ ุชุฌุฑูุจูุ ุฅูุฑุงุฏุงุช)
- ููุงุชุฑ ูุชูุฏูุฉ (ุญุงูุฉุ ููุน ุงูุฎุทุฉุ ุจุญุซ)
- ุฅุฌุฑุงุกุงุช (ุนุฑุถ ููุงุชูุฑุ ูุฏููุนุงุชุ ุชุนุฏููุ ุฅูุบุงุก)
- ูุงูุฐุฉ ุฅูุดุงุก ุงุดุชุฑุงู ุฌุฏูุฏ
- ูุงูุฐุฉ ุฅูุบุงุก ุงูุงุดุชุฑุงู ูุน ุณุจุจ ุงูุฅูุบุงุก

### ๐ ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูููุงุชูุฑ (`/super-admin/invoices`)
**ุงูููุฒุงุช:**
- ุนุฑุถ ุฌููุน ุงูููุงุชูุฑ ูุน ุชูุงุตูู ุดุงููุฉ
- ุชุจููุจุงุช (ุงูููุงุชูุฑุ ุงูุฅุญุตุงุฆูุงุช)
- ููุงุชุฑ ูุชูุฏูุฉ (ุญุงูุฉุ ููุนุ ุชุงุฑูุฎ)
- ุฅุฌุฑุงุกุงุช (ุนุฑุถ ุชูุงุตููุ ุฅุฑุณุงูุ ุชุญุฏูุฏ ููุฏููุนุฉ)
- ูุงูุฐุฉ ุฅูุดุงุก ูุงุชูุฑุฉ ุฌุฏูุฏุฉ ูุน ุนูุงุตุฑ ูุชุนุฏุฏุฉ
- ูุงูุฐุฉ ุนุฑุถ ุชูุงุตูู ุงููุงุชูุฑุฉ ุงููุงููุฉ

### ๐ฐ ุตูุญุฉ ุฅุฏุงุฑุฉ ุงููุฏููุนุงุช (`/super-admin/payments`)
**ุงูููุฒุงุช:**
- ุนุฑุถ ุฌููุน ุงููุฏููุนุงุช ูุน ุชูุงุตูู ุงูุทุฑููุฉ
- ุจุทุงูุงุช ุฅุญุตุงุฆูุงุช ุงููุฏููุนุงุช
- ููุงุชุฑ ูุชูุฏูุฉ (ุญุงูุฉุ ุทุฑููุฉ ุงูุฏูุนุ ุชุงุฑูุฎ)
- ุฃููููุงุช ูุฎุชููุฉ ูุทุฑู ุงูุฏูุน
- ูุงูุฐุฉ ุชุณุฌูู ูุฏููุนุฉ ุฌุฏูุฏุฉ
- ูุงูุฐุฉ ุนุฑุถ ุชูุงุตูู ุงููุฏููุนุฉ

## ๐ ูุธุงู ุงูุฅุดุนุงุฑุงุช ุงูุชููุงุฆูุฉ

### โฐ ุงูุฌุฏููุฉ ุงูุฒูููุฉ
- **ูุญุต ูููู:** 9:00 ุตุจุงุญุงู
- **ูุญุต ุฃุณุจูุนู:** ุงูุงุซููู 10:00 ุตุจุงุญุงู

### ๐ง ุฃููุงุน ุงูุฅุดุนุงุฑุงุช

#### 1. ุชุฐููุฑุงุช ุงูุชุฌุฏูุฏ
- **7 ุฃูุงู ูุจู ุงูุชุฌุฏูุฏ:** ุชุฐููุฑ ูุจูุฑ
- **3 ุฃูุงู ูุจู ุงูุชุฌุฏูุฏ:** ุชุฐููุฑ ูุชูุณุท
- **1 ููู ูุจู ุงูุชุฌุฏูุฏ:** ุชุฐููุฑ ุนุงุฌู

#### 2. ุฅุดุนุงุฑุงุช ุงูููุงุชูุฑ ุงููุชุฃุฎุฑุฉ
- ูุญุต ูููู ููููุงุชูุฑ ุงููุชุฃุฎุฑุฉ
- ุชุญุฏูุซ ุชููุงุฆู ูุญุงูุฉ ุงููุงุชูุฑุฉ ุฅูู `OVERDUE`
- ุฅุฑุณุงู ุฅุดุนุงุฑ ููุดุฑูุฉ

#### 3. ุชุฐููุฑุงุช ุงูุชูุงุก ุงููุชุฑุฉ ุงูุชุฌุฑูุจูุฉ
- **3 ุฃูุงู ูุจู ุงูุงูุชูุงุก:** ุชุฐููุฑ ูุจูุฑ
- **1 ููู ูุจู ุงูุงูุชูุงุก:** ุชุฐููุฑ ุนุงุฌู
- **ุนูุฏ ุงูุงูุชูุงุก:** ุชุญุฏูุซ ุงูุญุงูุฉ ุฅูู `EXPIRED`

#### 4. ุฅุดุนุงุฑุงุช ูุดู ุงููุฏููุนุงุช
- ูุญุต ุงููุฏููุนุงุช ุงููุงุดูุฉ ูู ุขุฎุฑ 24 ุณุงุนุฉ
- ุฅุฑุณุงู ุฅุดุนุงุฑ ููุฑู ููุดุฑูุฉ

#### 5. ุงูุชูุงุฑูุฑ ุงูุฃุณุจูุนูุฉ
- ุฅุญุตุงุฆูุงุช ุงูุงุดุชุฑุงูุงุช ุงูุฌุฏูุฏุฉ ูุงูููุบูุฉ
- ุฅุฌูุงูู ุงูุฅูุฑุงุฏุงุช ุงูุฃุณุจูุนูุฉ
- ุนุฏุฏ ุงูููุงุชูุฑ ุงูุฌุฏูุฏุฉ ูุงููุฏููุนุฉ

## ๐ ุงูุฅุญุตุงุฆูุงุช ูุงูุชูุงุฑูุฑ

### ๐ ุฅุญุตุงุฆูุงุช ุงูุงุดุชุฑุงูุงุช
- ุฅุฌูุงูู ุงูุงุดุชุฑุงูุงุช
- ุชูุฒูุน ุญุณุจ ุงูุญุงูุฉ (ูุดุทุ ุชุฌุฑูุจูุ ููุบู)
- ุงูุฅูุฑุงุฏุงุช ุงูุดูุฑูุฉ ุงููุชููุนุฉ
- ูุนุฏู ุงูููู

### ๐ ุฅุญุตุงุฆูุงุช ุงูููุงุชูุฑ
- ุฅุฌูุงูู ุงูููุงุชูุฑ
- ุชูุฒูุน ุญุณุจ ุงูุญุงูุฉ (ูุณูุฏุฉุ ูุฑุณูุฉุ ูุฏููุนุฉุ ูุชุฃุฎุฑุฉ)
- ุฅุฌูุงูู ุงูุฅูุฑุงุฏุงุช
- ูุชูุณุท ูููุฉ ุงููุงุชูุฑุฉ

### ๐ฐ ุฅุญุตุงุฆูุงุช ุงููุฏููุนุงุช
- ุฅุฌูุงูู ุงููุฏููุนุงุช
- ุชูุฒูุน ุญุณุจ ุงูุญุงูุฉ ูุงูุทุฑููุฉ
- ุฅุฌูุงูู ุงููุจุงูุบ ุงููุญุตูุฉ
- ูุนุฏู ูุฌุงุญ ุงููุฏููุนุงุช

## ๐งช ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ

### โ ุงุฎุชุจุงุฑุงุช ูุงุฌุญุฉ:
- ุฌูุจ ุฌููุน ุงูุงุดุชุฑุงูุงุช: โ (2 ุงุดุชุฑุงูุงุช)
- ููุชุฑุฉ ุงูุงุดุชุฑุงูุงุช ุงููุดุทุฉ: โ (1 ุงุดุชุฑุงู)
- ููุชุฑุฉ ุงุดุชุฑุงูุงุช PRO: โ (1 ุงุดุชุฑุงู)
- ุฌูุจ ุฌููุน ุงูููุงุชูุฑ: โ (6 ููุงุชูุฑ)
- ููุชุฑุฉ ุงูููุงุชูุฑ ุงููุฏููุนุฉ: โ (2 ูุงุชูุฑุฉ)
- ุฌูุจ ุฌููุน ุงููุฏููุนุงุช: โ (2 ูุฏููุนุฉ)
- ููุชุฑุฉ ุงูุชุญูููุงุช ุงูุจูููุฉ: โ (1 ูุฏููุนุฉ)
- ูุธุงู ุงูุตูุญุงุช: โ
- ููุชุฑุฉ ุงูุชูุงุฑูุฎ: โ
- ุงูุฅุญุตุงุฆูุงุช: โ
- ูุธุงู ุงูุฅุดุนุงุฑุงุช: โ

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุงููุตูู ูููุธุงู
```
URL: http://localhost:3000/super-admin/subscriptions
ุงููุตุงุฏูุฉ: Super Admin ููุท
```

### 2. ุฅุฏุงุฑุฉ ุงูุงุดุชุฑุงูุงุช
- ุงูุชูู ุฅูู ุตูุญุฉ ุงูุงุดุชุฑุงูุงุช
- ุงุณุชุฎุฏู ุงูููุงุชุฑ ููุจุญุซ
- ุงุถุบุท "ุงุดุชุฑุงู ุฌุฏูุฏ" ูุฅูุดุงุก ุงุดุชุฑุงู
- ุงุณุชุฎุฏู ุงูุฅุฌุฑุงุกุงุช ูุฅุฏุงุฑุฉ ุงูุงุดุชุฑุงูุงุช

### 3. ุฅุฏุงุฑุฉ ุงูููุงุชูุฑ
- ุงูุชูู ุฅูู ุตูุญุฉ ุงูููุงุชูุฑ
- ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช ูู ุงูุชุจููุจ ุงูุซุงูู
- ุฅูุดุงุก ููุงุชูุฑ ุฌุฏูุฏุฉ
- ุชุชุจุน ุญุงูุงุช ุงูุฏูุน

### 4. ุฅุฏุงุฑุฉ ุงููุฏููุนุงุช
- ุงูุชูู ุฅูู ุตูุญุฉ ุงููุฏููุนุงุช
- ุชุณุฌูู ูุฏููุนุงุช ุฌุฏูุฏุฉ
- ุชุชุจุน ุทุฑู ุงูุฏูุน ุงููุฎุชููุฉ

## ๐ง ุงูุชูููู ูุงูุตูุงูุฉ

### ูุชุทูุจุงุช ุงููุธุงู
- Node.js 18+
- PostgreSQL/MySQL
- Redis (ููุชุฎุฒูู ุงููุคูุช)

### ุงูุชุจุนูุงุช ุงููุทููุจุฉ
```bash
npm install node-cron  # ููุฅุดุนุงุฑุงุช ุงูุชููุงุฆูุฉ
```

### ุชุดุบูู ุงููุธุงู
```bash
# Backend
cd backend
npm start

# Frontend
cd frontend
npm start
```

### ูุฑุงูุจุฉ ุงููุธุงู
- ูุธุงู ุงูุฅุดุนุงุฑุงุช ูุนูู ุชููุงุฆูุงู
- ูุญุต ูููู ูู 9:00 ุตุจุงุญุงู
- ูุญุต ุฃุณุจูุนู ููู ุงูุงุซููู 10:00 ุตุจุงุญุงู

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูุฃูุงู:** ุฌููุน APIs ูุญููุฉ ุจูุธุงู ูุตุงุฏูุฉ Super Admin
2. **ุงูุฃุฏุงุก:** ุงุณุชุฎุฏุงู ููุงุฑุณ ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุงุณุชุนูุงูุงุช ุงูุณุฑูุนุฉ
3. **ุงูุชูุณุน:** ุงููุธุงู ูุงุจู ููุชูุณุน ูุฅุถุงูุฉ ููุฒุงุช ุฌุฏูุฏุฉ
4. **ุงูุตูุงูุฉ:** ูุธุงู ุชูุธูู ุชููุงุฆู ููุจูุงูุงุช ุงููุฏููุฉ
5. **ุงููุฑุงูุจุฉ:** ุณุฌูุงุช ุดุงููุฉ ูุฌููุน ุงูุนูููุงุช

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ ุงูููุชุฑุญุฉ

1. **ุชูุงูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:** ุฅุถุงูุฉ ุฎุฏูุฉ ุฅุฑุณุงู ุงูุฅููููุงุช ุงููุนููุฉ
2. **ุชุตุฏูุฑ PDF:** ุฅุถุงูุฉ ุฅููุงููุฉ ุชุตุฏูุฑ ุงูููุงุชูุฑ ูู PDF
3. **ููุญุฉ ุชุญูู ูุชูุฏูุฉ:** ุฅุถุงูุฉ ุฑุณูู ุจูุงููุฉ ูุชุญูููุงุช ูุชูุฏูุฉ
4. **API ููุนููุงุก:** ุฅูุดุงุก APIs ููุนููุงุก ูุนุฑุถ ููุงุชูุฑูู
5. **ุชูุงูู ุจูุงุจุงุช ุงูุฏูุน:** ุฑุจุท ูุน Stripe, PayPal, ุฅูุฎ

---

**ุชู ุฅูุฌุงุฒ ุงููุธุงู ุจูุฌุงุญ โ**
**ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ุชูุช ุจูุฌุงุญ โ**
**ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงูููุฑู โ**
