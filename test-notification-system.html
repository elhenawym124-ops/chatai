<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            direction: rtl;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #f9f9f9;
        }
        .test-section h3 {
            color: #555;
            margin-top: 0;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        button:hover {
            background: #0056b3;
        }
        .error-btn {
            background: #dc3545;
        }
        .error-btn:hover {
            background: #c82333;
        }
        .success-btn {
            background: #28a745;
        }
        .success-btn:hover {
            background: #218838;
        }
        .warning-btn {
            background: #ffc107;
            color: #212529;
        }
        .warning-btn:hover {
            background: #e0a800;
        }
        .result {
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
            background: #e9ecef;
            border-left: 4px solid #007bff;
        }
        .status {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        .error-status {
            background: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”” Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„ØµØ§Ù…ØªØ©</h1>
        
        <div class="test-section">
            <h3>ğŸ“Š Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…</h3>
            <button onclick="checkSystemStatus()">ÙØ­Øµ Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…</button>
            <div id="systemStatus" class="result" style="display: none;"></div>
        </div>

        <div class="test-section">
            <h3>ğŸ¤ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ Ø§Ù„ØµØ§Ù…ØªØ©</h3>
            <p>Ù‡Ø°Ù‡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø³ØªÙ†Ø´Ø¦ Ø£Ø®Ø·Ø§Ø¡ ØµØ§Ù…ØªØ© Ù„Ø§ ÙŠØ±Ø§Ù‡Ø§ Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙˆÙ„ÙƒÙ† ØªØ¸Ù‡Ø± ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©:</p>
            <button class="error-btn" onclick="testSilentError()">Ø¥Ù†Ø´Ø§Ø¡ Ø®Ø·Ø£ ØµØ§Ù…Øª</button>
            <button class="warning-btn" onclick="testAPIQuotaError()">Ù…Ø­Ø§ÙƒØ§Ø© Ù†ÙØ§Ø¯ API</button>
            <button class="error-btn" onclick="testDatabaseError()">Ù…Ø­Ø§ÙƒØ§Ø© Ø®Ø·Ø£ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª</button>
            <div id="silentErrorResult" class="result" style="display: none;"></div>
        </div>

        <div class="test-section">
            <h3>ğŸ”” Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©</h3>
            <p>Ù‡Ø°Ù‡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ø³ØªÙ†Ø´Ø¦ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø¹Ø§Ø¯ÙŠØ© ØªØ¸Ù‡Ø± ÙÙŠ Ø§Ù„Ø¬Ø±Ø³:</p>
            <button class="success-btn" onclick="testSuccessNotification()">Ø¥Ø´Ø¹Ø§Ø± Ù†Ø¬Ø§Ø­</button>
            <button class="warning-btn" onclick="testWarningNotification()">Ø¥Ø´Ø¹Ø§Ø± ØªØ­Ø°ÙŠØ±</button>
            <button onclick="testInfoNotification()">Ø¥Ø´Ø¹Ø§Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</button>
            <div id="normalNotificationResult" class="result" style="display: none;"></div>
        </div>

        <div class="test-section">
            <h3>ğŸ“ˆ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</h3>
            <button onclick="getNotificationStats()">Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</button>
            <div id="statsResult" class="result" style="display: none;"></div>
        </div>

        <div class="test-section">
            <h3>ğŸ¯ Ø§Ø®ØªØ¨Ø§Ø± Ø´Ø§Ù…Ù„</h3>
            <button onclick="runFullTest()">ØªØ´ØºÙŠÙ„ Ø§Ø®ØªØ¨Ø§Ø± Ø´Ø§Ù…Ù„</button>
            <div id="fullTestResult" class="result" style="display: none;"></div>
        </div>

        <div id="overallStatus" class="status">
            âœ… Ø§Ù„Ù†Ø¸Ø§Ù… Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:3001/api/v1';
        
        // Get auth token from localStorage
        function getAuthToken() {
            return localStorage.getItem('token') || 'test-token';
        }

        // Check system status
        async function checkSystemStatus() {
            const result = document.getElementById('systemStatus');
            result.style.display = 'block';
            result.innerHTML = 'ğŸ”„ Ø¬Ø§Ø±ÙŠ ÙØ­Øµ Ø§Ù„Ù†Ø¸Ø§Ù…...';

            try {
                const response = await fetch(`${API_BASE}/monitor/health`, {
                    headers: {
                        'Authorization': `Bearer ${getAuthToken()}`
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    result.innerHTML = `
                        âœ… Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ø·Ø¨ÙŠØ¹ÙŠ<br>
                        ğŸ“Š Ø­Ø§Ù„Ø© Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª: ${data.database ? 'âœ… Ù…ØªØµÙ„Ø©' : 'âŒ ØºÙŠØ± Ù…ØªØµÙ„Ø©'}<br>
                        ğŸ”” Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª: ${data.notifications ? 'âœ… ÙØ¹Ø§Ù„' : 'âŒ ØºÙŠØ± ÙØ¹Ø§Ù„'}
                    `;
                } else {
                    result.innerHTML = `âŒ Ø®Ø·Ø£ ÙÙŠ ÙØ­Øµ Ø§Ù„Ù†Ø¸Ø§Ù…: ${response.status}`;
                }
            } catch (error) {
                result.innerHTML = `âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: ${error.message}`;
            }
        }

        // Test silent error
        async function testSilentError() {
            const result = document.getElementById('silentErrorResult');
            result.style.display = 'block';
            result.innerHTML = 'ğŸ”„ Ø¥Ù†Ø´Ø§Ø¡ Ø®Ø·Ø£ ØµØ§Ù…Øª...';

            try {
                const response = await fetch(`${API_BASE}/notifications/create`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${getAuthToken()}`
                    },
                    body: JSON.stringify({
                        type: 'error',
                        title: 'ğŸ¤ Ø®Ø·Ø£ ØµØ§Ù…Øª ØªØ¬Ø±ÙŠØ¨ÙŠ',
                        message: 'Ù‡Ø°Ø§ Ø®Ø·Ø£ ØµØ§Ù…Øª Ù„Ø§ ÙŠØ±Ø§Ù‡ Ø§Ù„Ø¹Ù…ÙŠÙ„ - ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡ Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±',
                        metadata: {
                            silent: true,
                            errorType: 'test_silent_error',
                            customerId: 'test-customer-123',
                            source: 'test_system'
                        }
                    })
                });

                if (response.ok) {
                    result.innerHTML = `
                        âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø®Ø·Ø£ ØµØ§Ù…Øª Ø¨Ù†Ø¬Ø§Ø­!<br>
                        ğŸ¤ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù† ÙŠØ±Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø®Ø·Ø£<br>
                        ğŸ“Š ØªØ­Ù‚Ù‚ Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø© Ù„Ø±Ø¤ÙŠØ© Ø§Ù„ØªÙØ§ØµÙŠÙ„
                    `;
                } else {
                    result.innerHTML = `âŒ ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø®Ø·Ø£ Ø§Ù„ØµØ§Ù…Øª: ${response.status}`;
                }
            } catch (error) {
                result.innerHTML = `âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: ${error.message}`;
            }
        }

        // Test API quota error
        async function testAPIQuotaError() {
            const result = document.getElementById('silentErrorResult');
            result.style.display = 'block';
            result.innerHTML = 'ğŸ”„ Ù…Ø­Ø§ÙƒØ§Ø© Ù†ÙØ§Ø¯ API...';

            try {
                const response = await fetch(`${API_BASE}/notifications/create`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${getAuthToken()}`
                    },
                    body: JSON.stringify({
                        type: 'error',
                        title: 'ğŸš« Ù†ÙØ§Ø¯ Ø­ØµØ© API',
                        message: 'ØªÙ… Ø§Ø³ØªÙ†ÙØ§Ø¯ Ø­ØµØ© Gemini API - Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù† ÙŠØ±Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø®Ø·Ø£',
                        metadata: {
                            silent: true,
                            errorType: 'quota_exceeded',
                            customerId: 'customer-456',
                            apiModel: 'gemini-1.5-flash',
                            source: 'api_quota_system'
                        }
                    })
                });

                if (response.ok) {
                    result.innerHTML = `
                        âœ… ØªÙ… Ù…Ø­Ø§ÙƒØ§Ø© Ù†ÙØ§Ø¯ API Ø¨Ù†Ø¬Ø§Ø­!<br>
                        ğŸ¤ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù† ÙŠØ±Ù‰ Ø±Ø³Ø§Ù„Ø© Ø®Ø·Ø£<br>
                        ğŸ“Š Ø§Ù„Ù…Ø·ÙˆØ±ÙˆÙ† Ø³ÙŠØ­ØµÙ„ÙˆÙ† Ø¹Ù„Ù‰ Ø¥Ø´Ø¹Ø§Ø± ÙÙˆØ±ÙŠ
                    `;
                } else {
                    result.innerHTML = `âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø©: ${response.status}`;
                }
            } catch (error) {
                result.innerHTML = `âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: ${error.message}`;
            }
        }

        // Test database error
        async function testDatabaseError() {
            const result = document.getElementById('silentErrorResult');
            result.style.display = 'block';
            result.innerHTML = 'ğŸ”„ Ù…Ø­Ø§ÙƒØ§Ø© Ø®Ø·Ø£ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª...';

            try {
                const response = await fetch(`${API_BASE}/notifications/create`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${getAuthToken()}`
                    },
                    body: JSON.stringify({
                        type: 'error',
                        title: 'ğŸ’¾ Ø®Ø·Ø£ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª',
                        message: 'ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª - Ø®Ø·Ø£ ØµØ§Ù…Øª',
                        metadata: {
                            silent: true,
                            errorType: 'database_connection_error',
                            customerId: 'customer-789',
                            source: 'database_system'
                        }
                    })
                });

                if (response.ok) {
                    result.innerHTML = `
                        âœ… ØªÙ… Ù…Ø­Ø§ÙƒØ§Ø© Ø®Ø·Ø£ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª!<br>
                        ğŸ¤ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ØµØ§Ù…Øª ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­<br>
                        ğŸ“Š Ø§Ù„Ø®Ø·Ø£ Ù…Ø³Ø¬Ù„ Ù„Ù„Ù…Ø·ÙˆØ±ÙŠÙ† ÙÙ‚Ø·
                    `;
                } else {
                    result.innerHTML = `âŒ ÙØ´Ù„ ÙÙŠ Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø©: ${response.status}`;
                }
            } catch (error) {
                result.innerHTML = `âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: ${error.message}`;
            }
        }

        // Test success notification
        async function testSuccessNotification() {
            const result = document.getElementById('normalNotificationResult');
            result.style.display = 'block';
            result.innerHTML = 'ğŸ”„ Ø¥Ù†Ø´Ø§Ø¡ Ø¥Ø´Ø¹Ø§Ø± Ù†Ø¬Ø§Ø­...';

            try {
                const response = await fetch(`${API_BASE}/notifications/create`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${getAuthToken()}`
                    },
                    body: JSON.stringify({
                        type: 'success',
                        title: 'âœ… Ø¹Ù…Ù„ÙŠØ© Ù†Ø§Ø¬Ø­Ø©',
                        message: 'ØªÙ… ØªÙ†ÙÙŠØ° Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­',
                        metadata: {
                            source: 'test_system'
                        }
                    })
                });

                if (response.ok) {
                    result.innerHTML = `
                        âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù†Ø¬Ø§Ø­!<br>
                        ğŸ”” ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¸Ù‡Ø± ÙÙŠ Ø§Ù„Ø¬Ø±Ø³ Ø§Ù„Ø¢Ù†
                    `;
                } else {
                    result.innerHTML = `âŒ ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±: ${response.status}`;
                }
            } catch (error) {
                result.innerHTML = `âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: ${error.message}`;
            }
        }

        // Test warning notification
        async function testWarningNotification() {
            const result = document.getElementById('normalNotificationResult');
            result.style.display = 'block';
            result.innerHTML = 'ğŸ”„ Ø¥Ù†Ø´Ø§Ø¡ Ø¥Ø´Ø¹Ø§Ø± ØªØ­Ø°ÙŠØ±...';

            try {
                const response = await fetch(`${API_BASE}/notifications/create`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${getAuthToken()}`
                    },
                    body: JSON.stringify({
                        type: 'warning',
                        title: 'âš ï¸ ØªØ­Ø°ÙŠØ± Ù…Ù‡Ù…',
                        message: 'ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¨Ø§Ù‡ Ù„Ù‡Ø°Ø§ Ø§Ù„ØªØ­Ø°ÙŠØ±',
                        metadata: {
                            source: 'test_system'
                        }
                    })
                });

                if (response.ok) {
                    result.innerHTML = `
                        âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„ØªØ­Ø°ÙŠØ±!<br>
                        ğŸ”” ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¸Ù‡Ø± ÙÙŠ Ø§Ù„Ø¬Ø±Ø³ Ø§Ù„Ø¢Ù†
                    `;
                } else {
                    result.innerHTML = `âŒ ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±: ${response.status}`;
                }
            } catch (error) {
                result.innerHTML = `âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: ${error.message}`;
            }
        }

        // Test info notification
        async function testInfoNotification() {
            const result = document.getElementById('normalNotificationResult');
            result.style.display = 'block';
            result.innerHTML = 'ğŸ”„ Ø¥Ù†Ø´Ø§Ø¡ Ø¥Ø´Ø¹Ø§Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§Øª...';

            try {
                const response = await fetch(`${API_BASE}/notifications/create`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${getAuthToken()}`
                    },
                    body: JSON.stringify({
                        type: 'info',
                        title: 'â„¹ï¸ Ù…Ø¹Ù„ÙˆÙ…Ø© Ù…ÙÙŠØ¯Ø©',
                        message: 'Ù‡Ø°Ù‡ Ù…Ø¹Ù„ÙˆÙ…Ø© Ù‚Ø¯ ØªÙ‡Ù…Ùƒ',
                        metadata: {
                            source: 'test_system'
                        }
                    })
                });

                if (response.ok) {
                    result.innerHTML = `
                        âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª!<br>
                        ğŸ”” ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¸Ù‡Ø± ÙÙŠ Ø§Ù„Ø¬Ø±Ø³ Ø§Ù„Ø¢Ù†
                    `;
                } else {
                    result.innerHTML = `âŒ ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±: ${response.status}`;
                }
            } catch (error) {
                result.innerHTML = `âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: ${error.message}`;
            }
        }

        // Get notification stats
        async function getNotificationStats() {
            const result = document.getElementById('statsResult');
            result.style.display = 'block';
            result.innerHTML = 'ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª...';

            try {
                const response = await fetch(`${API_BASE}/notifications/stats`, {
                    headers: {
                        'Authorization': `Bearer ${getAuthToken()}`
                    }
                });

                if (response.ok) {
                    const data = await response.json();
                    result.innerHTML = `
                        ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª:<br>
                        ğŸ“ˆ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª: ${data.stats.total}<br>
                        ğŸ”” ØºÙŠØ± Ù…Ù‚Ø±ÙˆØ¡Ø©: ${data.stats.unread}<br>
                        âŒ Ø£Ø®Ø·Ø§Ø¡: ${data.stats.byType.error}<br>
                        âš ï¸ ØªØ­Ø°ÙŠØ±Ø§Øª: ${data.stats.byType.warning}<br>
                        â„¹ï¸ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª: ${data.stats.byType.info}<br>
                        âœ… Ù†Ø¬Ø§Ø­: ${data.stats.byType.success}
                    `;
                } else {
                    result.innerHTML = `âŒ ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª: ${response.status}`;
                }
            } catch (error) {
                result.innerHTML = `âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: ${error.message}`;
            }
        }

        // Run full test
        async function runFullTest() {
            const result = document.getElementById('fullTestResult');
            result.style.display = 'block';
            result.innerHTML = 'ğŸ”„ ØªØ´ØºÙŠÙ„ Ø§Ø®ØªØ¨Ø§Ø± Ø´Ø§Ù…Ù„...';

            let testResults = [];

            // Test 1: Silent error
            try {
                const response1 = await fetch(`${API_BASE}/notifications/create`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${getAuthToken()}`
                    },
                    body: JSON.stringify({
                        type: 'error',
                        title: 'ğŸ¤ Ø§Ø®ØªØ¨Ø§Ø± Ø´Ø§Ù…Ù„ - Ø®Ø·Ø£ ØµØ§Ù…Øª',
                        message: 'Ø®Ø·Ø£ ØµØ§Ù…Øª Ù…Ù† Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø´Ø§Ù…Ù„',
                        metadata: { silent: true, source: 'full_test' }
                    })
                });
                testResults.push(response1.ok ? 'âœ… Ø®Ø·Ø£ ØµØ§Ù…Øª' : 'âŒ Ø®Ø·Ø£ ØµØ§Ù…Øª');
            } catch (e) {
                testResults.push('âŒ Ø®Ø·Ø£ ØµØ§Ù…Øª');
            }

            // Test 2: Normal notification
            try {
                const response2 = await fetch(`${API_BASE}/notifications/create`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${getAuthToken()}`
                    },
                    body: JSON.stringify({
                        type: 'info',
                        title: 'â„¹ï¸ Ø§Ø®ØªØ¨Ø§Ø± Ø´Ø§Ù…Ù„ - Ø¥Ø´Ø¹Ø§Ø± Ø¹Ø§Ø¯ÙŠ',
                        message: 'Ø¥Ø´Ø¹Ø§Ø± Ø¹Ø§Ø¯ÙŠ Ù…Ù† Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø´Ø§Ù…Ù„',
                        metadata: { source: 'full_test' }
                    })
                });
                testResults.push(response2.ok ? 'âœ… Ø¥Ø´Ø¹Ø§Ø± Ø¹Ø§Ø¯ÙŠ' : 'âŒ Ø¥Ø´Ø¹Ø§Ø± Ø¹Ø§Ø¯ÙŠ');
            } catch (e) {
                testResults.push('âŒ Ø¥Ø´Ø¹Ø§Ø± Ø¹Ø§Ø¯ÙŠ');
            }

            // Test 3: Stats
            try {
                const response3 = await fetch(`${API_BASE}/notifications/stats`, {
                    headers: { 'Authorization': `Bearer ${getAuthToken()}` }
                });
                testResults.push(response3.ok ? 'âœ… Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª' : 'âŒ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª');
            } catch (e) {
                testResults.push('âŒ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª');
            }

            result.innerHTML = `
                ğŸ¯ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø´Ø§Ù…Ù„:<br>
                ${testResults.join('<br>')}
                <br><br>
                ${testResults.every(r => r.startsWith('âœ…')) ? 
                    'ğŸ‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù†Ø¬Ø­Øª!' : 
                    'âš ï¸ Ø¨Ø¹Ø¶ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ÙØ´Ù„Øª'}
            `;
        }

        // Update status on page load
        window.onload = function() {
            const status = document.getElementById('overallStatus');
            status.innerHTML = 'âœ… Ø§Ù„Ù†Ø¸Ø§Ù… Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø± - ØªØ£ÙƒØ¯ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹';
        };
    </script>
</body>
</html>
